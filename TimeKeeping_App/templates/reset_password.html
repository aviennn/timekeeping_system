{% extends 'base.html' %}

{% block content %}
    <div class="d-flex justify-content-center">
        <div class="col-xl-4">
            <div class="change-pw-form">
                <div class="card">
                    <div class="card-body m-3">
                        <h2 class="font-weight-bold text-secondary text-center">
                            Reset Password
                        </h2>
                        <hr>

                        <div class="d-flex justify-content-center mt-5">
                            <img src="/static/images/3d-16.png" width="150">
                        </div>

                        <div class="mt-5 mb-5">
                            <p class="text-secondary text-center">
                                Please input the password reset code that you have received in your email account.
                            </p>
                        </div>

                        {% if error_message %}
                            <div class="alert alert-danger text-center">
                                <i class="fas fa-exclamation-triangle"></i> {{ error_message }}
                            </div>
                        {% endif %}
                        {% if success_message %}
                            <div class="alert alert-success text-center">
                                <i class="fas fa-check-circle"></i> {{ success_message }}
                            </div>
                        {% endif %}
                        
                        <form method="post">
                            {% csrf_token %}
                            
                            <div class="form-group position-relative">
                                <label class="font-weight-bold text-secondary">
                                    Reset Code
                                </label>
                                
                                <input type="text" name="code" class="form-control" required>
                            </div>

                            <div class="form-group position-relative">
                                <label class="font-weight-bold text-secondary">
                                    New Password
                                </label>
                                
                                <div class="input-group">
                                    <input type="password" name="new_password" id="new_password" class="form-control" required>

                                    <div class="input-group-append">
                                        <button type="button" class="btn btn-outline-secondary toggle-password" data-target="new_password">
                                            <i class="fa fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group position-relative mb-4">
                                <label class="font-weight-bold text-secondary">
                                    Confirm New Password
                                </label>
                                
                                <div class="input-group">
                                    <input type="password" name="confirm_password" id="confirm_password" class="form-control" required>

                                    <div class="input-group-append">
                                        <button type="button" class="btn btn-outline-secondary toggle-password" data-target="confirm_password">
                                            <i class="fa fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            
                            <div class="d-flex justify-content-center">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-undo"></i> Reset Password
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll(".toggle-password").forEach(function (button) {
                button.addEventListener("click", function () {
                    let input = document.getElementById(this.dataset.target);
                    let icon = this.querySelector("i");
                    if (input.type === "password") {
                        input.type = "text";
                        icon.classList.remove("fa-eye");
                        icon.classList.add("fa-eye-slash");
                    } else {
                        input.type = "password";
                        icon.classList.remove("fa-eye-slash");
                        icon.classList.add("fa-eye");
                    }
                });
            });

            // Auto-dismiss alerts after 5 seconds
            setTimeout(function() {
                const alerts = document.querySelectorAll('.alert');
                alerts.forEach(function(alert) {
                    alert.style.transition = 'opacity 0.5s';
                    alert.style.opacity = '0';
                    setTimeout(function() {
                        alert.remove();
                    }, 500);
                });
            }, 5000);
        });
    </script>
{% endblock %}

{% block footer %}
    <div>
        <footer class="footer-custom text-white mt-auto">
            <div class="footer-content-area text-center p-3">

                <div class="footer-logos d-flex justify-content-center mt-2 mb-2">
                    <img src="/static/images/gc.png" alt="GC Logo" class="logo-img-gc mt-2 mx-2">
                </div>

                <div class="footer-copyright text-center text-dark p-3">
                    Â© 2025 
                    <a class="gc-link text-dark mb-2" href="https://gocloudgroup.com/">GOCLOUD Inc.</a>
                </div>
            </div>
        </footer>
    </div>
{% endblock %}